{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('css/searchbar.css') }}">
{% endblock %}

{% block body %}
  <div class="container">
    <form method="get" class="mb-4 position-relative">
      <input type="text" name="search" value="{{ search|default('') }}" placeholder="Wyszukaj..." class="form-control" />
      <button type="submit" class="btn btn-search"><i class="fas fa-search search-icon"></i></button>
      {# You can pass category ID or name if categories are used later #}
    </form>

    <div class="row">
      <!-- Left column: filters -->
      <div class="col-md-3">
        <form method="get">
          <label>Price range</label>
          <input type="number" name="min_price" class="form-control mb-2" placeholder="Min">
          <input type="number" name="max_price" class="form-control mb-2" placeholder="Max">

          <label>Type</label>
          <select name="type" class="form-select mb-3">
            <option value="">Any</option>
            <option value="buy">Buy</option>
            <option value="rent">Rent</option>
            <option value="both">Both</option>
          </select>

          <button class="btn btn-primary">Apply</button>
        </form>
      </div>

      <!-- Right column: product grid -->
      <div class="col-md-9">
        <div class="row">
          {% for product in products %}
            <div class="col-md-4 mb-4">
              <div class="card h-100">
                <div class="card-body">
                  <h5 class="card-title">{{ product.name }}</h5>
                  <p class="card-text">{{ product.description|slice(0, 100) }}...</p>
                  <p class="text-muted">{{ product.type.value|capitalize }} — {{ product.basePrice }}€</p>
                  <a href="
                  {# {{ path('shop_product_show', {id: product.id}) }} #}
                   " class="btn btn-sm btn-outline-primary">View</a>
                </div>
              </div>
            </div>
          {% else %}
            <p>No products found.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
