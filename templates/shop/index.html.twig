{% extends 'base.html.twig' %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('css/searchbar.css') }}">
<link rel="stylesheet" href="{{ asset('css/price-range-slider.css') }}"
{% endblock %}

{% block body %}
  <div class="container">
    <form method="get" class="mb-4 position-relative">
      <input type="text" name="search" value="{{ search|default('') }}" placeholder="Wyszukaj..." class="form-control" />
      <button type="submit" class="btn btn-search"><i class="fas fa-search search-icon"></i></button>
      {# You can pass category ID or name if categories are used later #}
    </form>

    <div class="row">
      <!-- Left column: filters -->
      <div class="col-md-3">
        <form method="get">
          

          <label>Price range</label>
          <div class="double-slider-box">
            {# <h3 class="range-title">Price Range Slider</h3> #}
            <div class="range-slider">
              <span class="slider-track"></span>
              <input type="range" name="min_price" class="min-val" min="1000" max="12000" value="2000">
              <input type="range" name="max_price" class="max-val" min="1000" max="12000" value="7000">
              <div class="tooltip min-tooltip" id="price-min-tooltip"></div>
              <div class="tooltip max-tooltip" id="price-max-tooltip"></div>
            </div>
              <div class="input-box">
                <div class="min-box">
                  <div class="input-wrap">
                    <span class="input-addon">$</span>
                    <input type="text" class="input-field min-input">
                  </div>
                </div>
                <div class="max-box">
                  <div class="input-wrap">
                    <span class="input-addon">$</span>
                    <input type="text" class="input-field max-input">
                  </div>
                </div>
            </div>
          </div>
          

          <label>Type</label>
          <select name="type" class="form-select mb-3">
            <option value="">Any</option>
            <option value="buy">Buy</option>
            <option value="rent">Rent</option>
            <option value="both">Both</option>
          </select>

          <button class="btn btn-primary">Apply</button>
        </form>
      </div>

      <!-- Right column: product grid -->
      <div class="col-md-9">
        <div class="row">
          {% for product in products %}
            <div class="col-md-4 mb-4">
              <div class="card h-100">
                <div class="card-body">
                  <h5 class="card-title">{{ product.name }}</h5>
                  <p class="card-text">{{ product.description|slice(0, 100) }}...</p>
                  <p class="text-muted">{{ product.type.value|capitalize }} — {{ product.basePrice }}€</p>
                  <a href="
                  {{ path('shop_product_show', {id: product.id}) }}
                   " class="btn btn-sm btn-outline-primary">View</a>
                </div>
              </div>
            </div>
          {% else %}
            <p>No products found.</p>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  <script src="{{ asset('js/price-range-slider.js') }}"></script>
{% endblock %}
